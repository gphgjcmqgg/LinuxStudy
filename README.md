# LinuxStudy

## 虚拟机网络

| 连接方式    | 连接网卡    |  是否能连接本机  | 能否能连接局域网 | 是否能连接公网
| --------   | -----:      | :----:         |:----:           |:----:             |
| 桥接       | 本地真实网卡 |  可以           |       可以      |       可以        |
| NAT        |   VMnet8    |   可以          |       不能      |       可以        |
| 仅主机     |    VMnet1    |   可以         |       不能       |       不能        |

## 系统分区

两种分区表形式

1. MBR分区：主引导记录分区表，最大支持2.1TB硬盘，最多支持4个分区
2. GPT分区：（全局唯一标示分区表）,支持9.4ZB分区

分区类型
主分区：最多只能有4个
扩展分区：

  1. 最多只能有1个
  2. 主分区加扩展分区最多只能有4个
  3. 不能写入数据，只能包含逻辑分区
逻辑分区：

格式化
格式化的目的是写入文件系统

分区的设备文件名
/dev/hda1(IDE硬盘接口)
/dev/sda1(SCSI硬盘接口、SATA硬盘接口)
/dev/sdb5   第二块SATA接口硬盘的第一个逻辑分区

挂载点（使用已经存在的空目录作为挂载点）

挂载

1. 必须分区
  /                 根分区
  swap分区          交换分区（虚拟内存）
2. 推荐分区
  /boot             (启动分区，1GB)   --也一定要分
3. 常用分区
  /home             （用于文件服务器）
  /www              （用于web服务器）

## 远程管理工具 配置IP地址

### Redhat6.5以后可以通过setup工具设置IP地址，注意激活onboot=yes

setup                         --进入ip配置页面
service network restart       --重启网络服务

## linux注意事项

1. linux严格区分大小写
2. linux一切皆文件
  linux的设备文件保存在/dev/目录中，硬盘文件是/dev/sd[a-p],光盘文件是/dev/hdc
  touch 文件名              --创建文件
3. linux不靠扩展名区分文件类型
  1)压缩包强制需要扩展名
  2)二进制软件包 RPM包，*.rpm做结尾
  3)程序文件 Shell脚本*.sh
  4)网页文件 *.html,*.php
4. Linux中所有存储设备都必须在挂载之后才能使用
5. Windows下的程序不能直接在Linux中使用

## 服务器管理建议

1. Linux的目录结构

/bin/             --存放系统命令的目录，普通用户和超级用户都可以执行，是/usr/bin/目录的软链接
/sbin/            --存放系统命令的目录，只有超级用户都可以执行，是/usr/sbin/目录的软链接
/usr/bin/         --存放系统命令的目录，普通用户和超级用户都可以执行
/usr/sbin/        --存放系统命令的目录，只有超级用户都可以执行
/boot/            --系统启动目录
/dev/             --设备文件保存位置
/etc/             --配置文件保存位置
/home/            --普通用户的家目录   普通用户家目录在/home/用户名  超级用户家目录在/root下
/lib/             --程序的函数库
/lib64/           --程序的函数库
/lost+found/
/misc/            --挂载网络存储设备
/mnt/             --挂载u盘和移动硬盘
/media/           --挂载光盘
/opt/             --第三方安装软件位置   /usr/local目录也可以用来安装软件
/proc/
/sys/
/net/
/root/            --宿主目录
/tmp/             --临时目录

二级目录
/usr/lib/
/usr/local/         --手工安装的软件保存位置
/usr/share/
/usr/src/           --源码包保存位置   /usr/local/src
/usr/src/kernels/   --内核源码保存位置
/var/               --动态数据保存位置。日志
/var/www/html/      --RPM包安装的Apache的网页主目录
/var/lib/           --mysql的数据库保存在/var/lib/mysql/目录中
/var/log/           --系统日志保存位置
/var/run/           --一些服务和程序运行后，PID（进程ID）保存位置。
/var/spool/         --放置队列数据的目录
/var/spool/mail/    --新收到邮件队列保存位置
/var/spool/cron/    --系统定时任务队列保存位置

远程服务器使用注意细节

1. 远程服务器只能重启不要关机，在重启前，要终止正在执行的服务
2. 重启命令的选用        推荐使用  shutdown -r now,在关机前多次使用sync命令
3. 不要在服务器访问高峰运行高负载命令
4. 远程配置防火墙时不要把自己踢出服务器
  防火墙：基本功能是数据包的过滤(IP、MAC地址、端口号、协议类型、数据包中数据)
5. 指定合理的密码规范
6. 合理分配权限
7. 定期备份主要数据和日志

## linux常用命令

### 命令的基本格式

1. 命令的提示符
[root@localhost ~]#

* []:分隔符
* root：当前登录用户
* @：分隔符
* localhost：当前系统的简写主机名
* ~：代表用户当前所在的目录  ~表示用户当前所在的目录是家目录
* #：命令提示符   超级用户是#    普通用户是$

2.命令的基本格式
命令 [选项] [参数]

### ls是最常见的目录操作命令，主要作用是显示目录下的内容

* 命令名称：ls
* 英文原意：list
* 所在路径：/bin/ls
* 执行权限：所有用户
* 功能描述：显示目录下的内容

ls [选项] [文件名或目录名]

1. ls -a          --显示所有文件（隐藏文件）
2. ls -d          --显示目录信息，而不是目录下的文件
3. ls -h          --按照习惯的单位显示文件大小
4. ls -i          --显示文件的i节点号
5. ls -l          --长格式显示

### cd命令

cd是切换所在目录的命令
绝对路径和相对路径

1. 绝对路径：以根目录为参照物，从根目录开始，一级一级进入目录
2. 相对路径：以当前目录作为参照物，进行目录查找

cd命令的简化用法

1. cd ~          --代表用户家目录
2. cd -          --代表上次所在目录
3. cd .          --代表当前目录
4. cd ..         --代表上级目录

### mkdir和rmdir

mkdir是创建目录的命令
mkdir [选项] 目录名
选项:
  -p: 递归建立所需目录

rmdir是删除目录的命令
rmdir [选项] 目录名
选项:
  -p: 递归删除目录

注：只能删除空目录

### rm

rm是强大的删除命令，不仅可以删除文件，也可以删除目录
rm [选项] 文件或目录
选项：
  -f: 强制删除(force)
  -i: 交互删除，在删除之前询问用户
  -r: 递归删除，可以删除目录(recurive)

rm -rf [目录名]
rm -rf [目录名]/*

extundelete实现linux下文件和文件夹数据恢复

### 文件操作命令

echo 内容 >> 文件名       --输出重定向到文件

#### touch命令

touch是创建空文件或修改文件时间

#### stat命令

stat是查看文件或文件系统的详细信息的命令

#### cat命令

cat是查看文件内容
常见选项：
  -n：显示行号
  -A: 显示所有隐藏符号

#### more命令

more是分屏显示文件的命令

-空格键：向下翻页
-b：向上翻页
-回车键：向下滚动一行
-q：退出

#### less命令

less是分行显示文件的命令

#### head命令

head显示文件头

#### tail命令

tail显示文件尾

tail -n 行数        --显示文件尾行数
-f                  --监听文件

#### ln命令

ln [选项] 源文件 目标文件
选项：
  -s：建立软链接文件。如果不加"-s"选项，则建立硬链接文件
  -f: 强制。如果目标文件已经存在，则删除目标文件后再建立链接文件

硬链接
ln /root/bols /tmp/

硬链接特征：

*硬链接和源文件拥有相同的Inode和Block
*两个文件修改任意一个，另一个都改变
*删除任意一个文件，另一个都能使用
*硬链接标记不清，很难确认硬链接文件位置，不建议使用
*硬链接不能链接目录
*硬链接不能跨分区

软链接(理解为windows的快捷方式)  
ln -s /root/cde /tmp/cde_s

软链接特征：

*软链接和源文件拥有不同的Inode和Block
*两个文件修改任意一个，另一个都改变
*删除软链接，源文件不受影响，删除源文件，软链接不能使用
*软链接没有实际数据，只保存源文件的Inode，不论源文件多大，软链接大小不变
*软链接的权限是最大权限，lrwxrwxrwx，但是由于没有实际数据，最终访问时需要参考源文件权限
*软链接可以链接目录
*软链接可以跨分区
*软链接特征明显，建议使用软链接
*软链接一定要写绝对路径，不然报错

#### cp命令

cp用于复制的命令
cp [选项] 源文件 目标文件
选项：
  -r：递归复制，用于复制目录

#### mv命令

mv [选项] 源文件 目标文件
选项：
  -f：强制覆盖

mv命令        除了移动文件还有重命名文件的作用

### 基本权限管理

文件权限的查看：
-rw-r--r-- 1 root root 216 may 12 2017 /mnt/rht
第一位代表:文件类型
-普通文件
d 目录
l 软链接
s 套接字
c 字符设备（显示字符，如date命令）/dev/pts/1 date > /dev/pts/1

第2到第10位：文件的权限
rw-|r--|r--
u   g   o
u: user(所有者)
g: group(组)
o: other

r 读权限read        4
w 写权限write       2
x 操作权限execute   1

#### 基本权限命令

##### chmod     修改权限的命令

英文愿意：change file mode bits
chmod [选项] 权限模式 文件名
选项：
  -R：递归设置权限，也就是给子目录中的所有文件设定权限

例子：
chmod u+w,g+w,o+w bcd
chmod u-w,g-w,o-w bcd
chmod u=rwx bcd
chmod 755 bcd

#### 所有者和所属组命令

useradd user1
passwd  user1

##### chown       是修改文件和目录的所有者和所属组的命令

英文原意：change file owner and group
chown [选项] 所有者:所属组 文件或目录

chown user1 文件名
chown root:root 文件名

普通用户不能修改文件的所有者，哪怕自己是这个文件的所有者也不行
普通用户可以修改所有者是自己的文件的权限

##### chgrp命令

chgrp是修改文件和目录的所属组的命令

